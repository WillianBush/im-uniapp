(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-group-message_record"],{"47b0":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return a}));var a={uParse:i("4494").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0,nameToLeft:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"}),i("template",{attrs:{slot:"content"},slot:"content"},[e._v("历史聊天记录")]),i("template",{attrs:{slot:"right"},slot:"right"})],2),i("v-uni-view",{staticClass:"cu-chat"},[e.list.length<=0?i("v-uni-view",{staticStyle:{"text-align":"center",color:"#aaa","margin-top":"60upx","font-size":"28upx"}},[e._v("暂无聊天记录")]):e._e(),e._l(e.list,(function(t,a){return[t.opt&&"undo"==t.opt?[i("v-uni-view",{staticStyle:{display:"none"}})]:"SYS_TXT"==t.type?[i("v-uni-view",{staticClass:"cu-info round"},[i("v-uni-rich-text",{attrs:{nodes:t.bean.txt}})],1)]:"USER_CARD"==t.type?[t.bean.fromUid==e.$store.state.user.id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticStyle:{border:"1px solid #eee","background-color":"#fff",width:"400upx",height:"180upx","border-radius":"6px"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clickCard(t.bean)}}},[i("v-uni-view",{staticStyle:{height:"130upx","border-bottom":"1px solid #eee",width:"90%",margin:"auto auto",display:"flex"}},[i("v-uni-view",{staticClass:"cu-avatar radius",staticStyle:{width:"80upx","margin-top":"26upx",height:"80upx"},style:"background-image:url("+e.$store.state.img_url+t.bean.mheadpic+");"}),i("v-uni-view",{staticStyle:{width:"240upx","margin-top":"30upx","margin-left":"12upx","text-align":"left"}},[i("v-uni-view",{staticStyle:{overflow:"hidden","word-break":"keep-all","text-overflow":"ellipsis"}},[e._v(e._s(t.bean.mname))]),i("v-uni-view",{staticStyle:{color:"#bbb","font-size":"24upx","margin-top":"8upx"}},[e._v("ID："+e._s(t.bean.mid))])],1)],1),i("v-uni-view",{staticStyle:{height:"50upx","line-height":"50upx","text-align":"left","font-size":"23upx","padding-left":"20upx",color:"#777"}},[e._v("个人名片")])],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+e.$store.state.img_url+t.bean.fromHeadpic+");"}),i("v-uni-view",{staticClass:"date"},[e._v(e._s(t.bean.date))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+e.$store.state.img_url+t.bean.fromHeadpic+");",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.goUserDetail(t.bean.fromUid)}}}),i("v-uni-view",{staticClass:"main",staticStyle:{display:"block!important"}},[i("v-uni-view",{staticStyle:{height:"40upx","font-size":"12px",color:"#8799a3"}},[e._v(e._s(t.bean.fromName))]),i("v-uni-view",{staticStyle:{border:"1px solid #eee","background-color":"#fff",width:"400upx",height:"180upx","border-radius":"6px"},on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clickCard(t.bean)}}},[i("v-uni-view",{staticStyle:{height:"130upx","border-bottom":"1px solid #eee",width:"90%",margin:"auto auto",display:"flex"}},[i("v-uni-view",{staticClass:"cu-avatar radius",staticStyle:{width:"80upx","margin-top":"26upx",height:"80upx"},style:"background-image:url("+e.$store.state.img_url+t.bean.mheadpic+");"}),i("v-uni-view",{staticStyle:{width:"240upx","margin-top":"30upx","margin-left":"12upx","text-align":"left"}},[i("v-uni-view",{staticStyle:{overflow:"hidden","word-break":"keep-all","text-overflow":"ellipsis"}},[e._v(e._s(t.bean.mname))]),i("v-uni-view",{staticStyle:{color:"#bbb","font-size":"24upx","margin-top":"8upx"}},[e._v("ID："+e._s(t.bean.mid))])],1)],1),i("v-uni-view",{staticStyle:{height:"50upx","line-height":"50upx","text-align":"left","font-size":"23upx","padding-left":"20upx",color:"#777"}},[e._v("个人名片")])],1)],1),i("v-uni-view",{staticClass:"date "},[e._v(e._s(t.bean.date))])],1)]:"USER_RED"==t.type?[t.bean.fromUid==e.$store.state.user.id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticStyle:{"background-color":"#FF3A36",width:"380upx",height:"150upx","border-radius":"6px"},style:t.bean.opened&&1==t.bean.opened?"opacity: .6;":"",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clickHongbao(t.bean)}}},[i("v-uni-view",{staticStyle:{float:"left",height:"150upx"}},[i("v-uni-view",{staticStyle:{float:"left","margin-top":"40upx","margin-left":"20upx"}},[i("v-uni-text",{staticClass:"iconfont icon-lingquhongbao",staticStyle:{"font-size":"64upx",color:"#FCBF00"}},[i("span")])],1),i("v-uni-view",{staticStyle:{float:"left"}},[i("v-uni-view",{staticStyle:{"text-align":"left",color:"#f6f6f6","margin-top":"52upx","margin-left":"20upx","font-size":"28upx",overflow:"hidden",width:"250upx",height:"44upx"}},[e._v(e._s(t.bean.descri))])],1)],1)],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+e.$store.state.img_url+t.bean.fromHeadpic+");"}),i("v-uni-view",{staticClass:"date"},[e._v(e._s(t.bean.date))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+e.$store.state.img_url+t.bean.fromHeadpic+");",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.goUserDetail(t.bean.fromUid)}}}),i("v-uni-view",{staticClass:"main",staticStyle:{display:"block!important"}},[i("v-uni-view",{staticStyle:{height:"40upx","font-size":"12px",color:"#8799a3"}},[e._v(e._s(t.bean.fromName))]),i("v-uni-view",{staticStyle:{"background-color":"#FF3A36",width:"380upx",height:"150upx","border-radius":"6px"},style:t.bean.opened&&1==t.bean.opened?"opacity: .6;":"",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clickHongbao(t.bean)}}},[i("v-uni-view",{staticStyle:{float:"left",height:"150upx"}},[i("v-uni-view",{staticStyle:{float:"left","margin-top":"40upx","margin-left":"20upx"}},[i("v-uni-text",{staticClass:"iconfont icon-lingquhongbao",staticStyle:{"font-size":"64upx",color:"#FCBF00"}},[i("span")])],1),i("v-uni-view",{staticStyle:{float:"left"}},[i("v-uni-view",{staticStyle:{"text-align":"left",color:"#f6f6f6","margin-top":"52upx","margin-left":"20upx","font-size":"28upx",overflow:"hidden",width:"250upx",height:"44upx"}},[e._v(e._s(t.bean.descri))])],1)],1)],1)],1),i("v-uni-view",{staticClass:"date "},[e._v(e._s(t.bean.date))])],1)]:[t.bean.fromUid==e.$store.state.user.id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content bg-green shadow",staticStyle:{"background-color":"#fff",color:"#222"}},["uparse"==t.bean.psr?i("u-parse",{attrs:{content:t.bean.txt},on:{preview:function(t){arguments[0]=t=e.$handleEvent(t),e.preview.apply(void 0,arguments)},navigate:function(t){arguments[0]=t=e.$handleEvent(t),e.navigate.apply(void 0,arguments)}}}):"voice"==t.bean.psr?i("v-uni-view",{on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clickVoice(t.bean.txt,a)}}},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.selVoiceIndex!=a,expression:"selVoiceIndex != index"}],staticClass:"iconfont icon-yuyin1 text-xxl ",staticStyle:{float:"left",width:"100upx","font-size":"52upx",position:"relative",top:"4upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.selVoiceIndex!=a,expression:"selVoiceIndex != index"}],staticStyle:{float:"left","font-size":"26upx",position:"relative",top:"4upx"}},[e._v(e._s(t.bean.sub_txt)+'"')]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.selVoiceIndex==a,expression:"selVoiceIndex == index"}],staticClass:"iconfont cu-load load-cuIcon loading text-xxl ",staticStyle:{float:"left",width:"100upx","font-size":"52upx",position:"relative","text-align":"left",top:"0","line-height":"38upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.selVoiceIndex==a,expression:"selVoiceIndex == index"}],staticStyle:{float:"left","font-size":"26upx",position:"relative",top:"6upx"}},[e._v(e._s(t.bean.sub_txt)+'"')])],1):"video"==t.bean.psr?i("v-uni-video",{attrs:{direction:"0",src:e.$store.state.img_url+t.bean.txt}}):i("v-uni-rich-text",{attrs:{nodes:t.bean.txt}})],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+e.$store.state.img_url+t.bean.fromHeadpic+");"}),i("v-uni-view",{staticClass:"date"},[e._v(e._s(t.bean.date))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+e.$store.state.img_url+t.bean.fromHeadpic+");",on:{click:function(i){i.stopPropagation(),arguments[0]=i=e.$handleEvent(i),e.goUserDetail(t.bean.fromUid)}}}),i("v-uni-view",{staticClass:"main",staticStyle:{display:"block!important"}},[i("v-uni-view",{staticStyle:{height:"40upx","font-size":"12px",color:"#8799a3"}},[e._v(e._s(t.bean.fromName))]),i("v-uni-view",{staticClass:"content shadow",staticStyle:{color:"#222"}},["uparse"==t.bean.psr?i("u-parse",{attrs:{content:t.bean.txt},on:{preview:function(t){arguments[0]=t=e.$handleEvent(t),e.preview.apply(void 0,arguments)},navigate:function(t){arguments[0]=t=e.$handleEvent(t),e.navigate.apply(void 0,arguments)}}}):"voice"==t.bean.psr?i("v-uni-view",{on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.clickVoice(t.bean.txt,a)}}},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.selVoiceIndex!=a,expression:"selVoiceIndex != index"}],staticClass:"iconfont icon-yuyin1 text-xxl ",staticStyle:{"text-align":"right",float:"right",width:"100upx","font-size":"52upx",position:"relative",top:"4upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.selVoiceIndex!=a,expression:"selVoiceIndex != index"}],staticStyle:{float:"right","font-size":"26upx",position:"relative",top:"4upx"}},[e._v(e._s(t.bean.sub_txt)+'"')]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.selVoiceIndex==a,expression:"selVoiceIndex == index"}],staticClass:"iconfont cu-load load-cuIcon loading text-xxl ",staticStyle:{"text-align":"right",float:"right",width:"100upx","font-size":"52upx",position:"relative",top:"0","line-height":"38upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.selVoiceIndex==a,expression:"selVoiceIndex == index"}],staticStyle:{float:"right","font-size":"26upx",position:"relative",top:"6upx"}},[e._v(e._s(t.bean.sub_txt)+'"')])],1):"video"==t.bean.psr?i("v-uni-video",{attrs:{direction:"0",src:e.$store.state.img_url+t.bean.txt}}):i("v-uni-rich-text",{attrs:{nodes:t.bean.txt}})],1)],1),i("v-uni-view",{staticClass:"date "},[e._v(e._s(t.bean.date))])],1)]]}))],2),i("openRed",{directives:[{name:"show",rawName:"v-show",value:e.showOpenRed,expression:"showOpenRed"}],on:{hide:function(t){arguments[0]=t=e.$handleEvent(t),e.hideOpenRed.apply(void 0,arguments)},openRedDetail:function(t){arguments[0]=t=e.$handleEvent(t),e.openRedDetail.apply(void 0,arguments)}}})],1)},o=[]},"4bb5":function(e,t,i){"use strict";(function(e){var a=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,o=a(i("ade3")),s=a(i("4494")),l=a(i("7d36")),u=(uni.createInnerAudioContext(),{components:{uParse:s.default,openRed:l.default},data:function(){return{list:[],player:null,selVoiceIndex:-1,domHeight:0,c_type:1,InputBottom:0,toid:"",entity:{},txt:"",temp_txt:"",showjia:!0,emotion:1,showItem:0,scrollTop:0,style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},sendCount:0,RECORDER:uni.getRecorderManager(),AUDIO:uni.createInnerAudioContext(),recordTimer:null,recordLength:0,voicePath:"",isRecord:!1,intervalTime:0,timer:null,v_base64:"",winSize:{},showShade:!1,showPop:!1,popButton:["复制","转发","收藏","删除","撤消"],popButtonStore:["复制","转发","收藏","删除","撤消"],popStyle:"",pickerUserIndex:-1,temp_content:"",temp_uuid:"",chatCfg:{},temp_bean:null,showOpenRed:!1,stopSpeak:0}},onLoad:function(e){var t=this,i=uni.getStorageSync("USER"),a=uni.getStorageSync(i.id+"#"+this.$store.state.cur_chat_entity.id+"_CHAT_MESSAGE");if(a&&""!=a){var n=JSON.parse(a);t.list=n}setTimeout((function(){uni.pageScrollTo({scrollTop:9999999999,duration:0})}),50)},methods:(n={getPopButton:function(e){return"复制"==e?"icon-fuzhi":"转发"==e?"icon-zhuanfa":"收藏"==e?"icon-collection-b":"删除"==e?"icon-shanchu":"撤消"==e?"icon-shangjiachexiaoshenqingrenzhengliebiao":""},clickCard:function(e){this.goUserDetail(e.muuid)},sendCard:function(){1!=this.stopSpeak&&this.checkStopSpeak()&&(this.showPop=!1,this.showItem=0,this.InputBottom=0,uni.navigateTo({url:"/pages/chat/card/sendCard"}),this.$store.state.temp.bean=this.entity)},openRedDetail:function(){this.showOpenRed=!1,uni.navigateTo({url:"/pages/chat/red/red_detail"})},hideOpenRed:function(){this.showOpenRed=!1},clickHongbao:function(e){var t=uni.getStorageSync("USER"),i=uni.getStorageSync(t.id+"_RED_MUST_UPDATE_MAP");if(i&&""!=i){var a=JSON.parse(i);this.temp_bean=a[e.redUUID],a[e.redUUID]&&(e=a[e.redUUID])}this.temp_bean=e,this.showOpenRed=!0,this.$store.state.temp.bean=this.temp_bean},clickVoice:function(t,i){var a=this;if(this.selVoiceIndex==i)return this.selVoiceIndex=-1,void(this.player&&(this.player.stop(),e("log","停止了"," at pages/chat/group/message_record.vue:384")));e("log",t," at pages/chat/group/message_record.vue:389"),this.selVoiceIndex=i,this.player=plus.audio.createPlayer(t),this.player.play((function(){a.selVoiceIndex=-1,e("log","播放完了"," at pages/chat/group/message_record.vue:395")}),(function(t){e("log","播放失败"," at pages/chat/group/message_record.vue:397")}))},goUserDetail:function(e){uni.navigateTo({url:"/pages/chat/user_detail?id="+e})},goMgr:function(e){uni.navigateTo({url:"/pages/chat/user/mgr?id="+e})},send:function(){var e={txt:this.txt,toUid:this.toid,fromUid:this.$store.state.user.id};this.$websocket.dispatch("WEBSOCKET_SEND","{body:'"+JSON.stringify(e)+"',CMD:'USER_CHAT_SEND_TXT'}")},InputFocus:function(e){this.InputBottom=e.detail.height},InputBlur:function(e){this.InputBottom=0}},(0,o.default)(n,"clickVoice",(function(t,i){var a=this;if(this.selVoiceIndex==i)return this.selVoiceIndex=-1,void(this.player&&(this.player.stop(),e("log","停止了"," at pages/chat/group/message_record.vue:436")));e("log",t," at pages/chat/group/message_record.vue:441"),this.selVoiceIndex=i,this.player=plus.audio.createPlayer(t),this.player.play((function(){a.selVoiceIndex=-1,e("log","播放完了"," at pages/chat/group/message_record.vue:447")}),(function(t){e("log","播放失败"," at pages/chat/group/message_record.vue:449")}))})),(0,o.default)(n,"scrollToBottom",(function(){setTimeout((function(){uni.pageScrollTo({scrollTop:9999999999,duration:0})}),100)})),n)});t.default=u}).call(this,i("0de9")["log"])},"4bd8":function(e,t,i){"use strict";i.r(t);var a=i("47b0"),n=i("8ff5");for(var o in n)"default"!==o&&function(e){i.d(t,e,(function(){return n[e]}))}(o);var s,l=i("f0c5"),u=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"6e7e3b66",null,!1,a["a"],s);t["default"]=u.exports},"8ff5":function(e,t,i){"use strict";i.r(t);var a=i("4bb5"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a}}]);