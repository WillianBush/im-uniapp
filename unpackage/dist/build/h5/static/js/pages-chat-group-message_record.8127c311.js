(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-group-message_record"],{"067b":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var a={uParse:i("bd22").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0,nameToLeft:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"}),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("历史聊天记录")]),i("template",{attrs:{slot:"right"},slot:"right"})],2),i("v-uni-view",{staticClass:"cu-chat"},[t.list.length<=0?i("v-uni-view",{staticStyle:{"text-align":"center",color:"#aaa","margin-top":"60upx","font-size":"28upx"}},[t._v("暂无聊天记录")]):t._e(),t._l(t.list,(function(e,a){return[e.opt&&"undo"==e.opt?[i("v-uni-view",{staticStyle:{display:"none"}})]:"SYS_TXT"==e.type?[i("v-uni-view",{staticClass:"cu-info round"},[i("v-uni-rich-text",{attrs:{nodes:e.bean.txt}})],1)]:"USER_CARD"==e.type?[e.bean.fromUid==t.$store.state.user.id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticStyle:{border:"1px solid #eee","background-color":"#fff",width:"400upx",height:"180upx","border-radius":"6px"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickCard(e.bean)}}},[i("v-uni-view",{staticStyle:{height:"130upx","border-bottom":"1px solid #eee",width:"90%",margin:"auto auto",display:"flex"}},[i("v-uni-view",{staticClass:"cu-avatar radius",staticStyle:{width:"80upx","margin-top":"26upx",height:"80upx"},style:"background-image:url("+t.$store.state.img_url+e.bean.mheadpic+");"}),i("v-uni-view",{staticStyle:{width:"240upx","margin-top":"30upx","margin-left":"12upx","text-align":"left"}},[i("v-uni-view",{staticStyle:{overflow:"hidden","word-break":"keep-all","text-overflow":"ellipsis"}},[t._v(t._s(e.bean.mname))]),i("v-uni-view",{staticStyle:{color:"#bbb","font-size":"24upx","margin-top":"8upx"}},[t._v("ID："+t._s(e.bean.mid))])],1)],1),i("v-uni-view",{staticStyle:{height:"50upx","line-height":"50upx","text-align":"left","font-size":"23upx","padding-left":"20upx",color:"#777"}},[t._v("个人名片")])],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.$store.state.img_url+e.bean.fromHeadpic+");"}),i("v-uni-view",{staticClass:"date"},[t._v(t._s(e.bean.date))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.$store.state.img_url+e.bean.fromHeadpic+");",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goUserDetail(e.bean.fromUid)}}}),i("v-uni-view",{staticClass:"main",staticStyle:{display:"block!important"}},[i("v-uni-view",{staticStyle:{height:"40upx","font-size":"12px",color:"#8799a3"}},[t._v(t._s(e.bean.fromName))]),i("v-uni-view",{staticStyle:{border:"1px solid #eee","background-color":"#fff",width:"400upx",height:"180upx","border-radius":"6px"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickCard(e.bean)}}},[i("v-uni-view",{staticStyle:{height:"130upx","border-bottom":"1px solid #eee",width:"90%",margin:"auto auto",display:"flex"}},[i("v-uni-view",{staticClass:"cu-avatar radius",staticStyle:{width:"80upx","margin-top":"26upx",height:"80upx"},style:"background-image:url("+t.$store.state.img_url+e.bean.mheadpic+");"}),i("v-uni-view",{staticStyle:{width:"240upx","margin-top":"30upx","margin-left":"12upx","text-align":"left"}},[i("v-uni-view",{staticStyle:{overflow:"hidden","word-break":"keep-all","text-overflow":"ellipsis"}},[t._v(t._s(e.bean.mname))]),i("v-uni-view",{staticStyle:{color:"#bbb","font-size":"24upx","margin-top":"8upx"}},[t._v("ID："+t._s(e.bean.mid))])],1)],1),i("v-uni-view",{staticStyle:{height:"50upx","line-height":"50upx","text-align":"left","font-size":"23upx","padding-left":"20upx",color:"#777"}},[t._v("个人名片")])],1)],1),i("v-uni-view",{staticClass:"date "},[t._v(t._s(e.bean.date))])],1)]:"USER_RED"==e.type?[e.bean.fromUid==t.$store.state.user.id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticStyle:{"background-color":"#FF3A36",width:"380upx",height:"150upx","border-radius":"6px"},style:e.bean.opened&&1==e.bean.opened?"opacity: .6;":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickHongbao(e.bean)}}},[i("v-uni-view",{staticStyle:{float:"left",height:"150upx"}},[i("v-uni-view",{staticStyle:{float:"left","margin-top":"40upx","margin-left":"20upx"}},[i("v-uni-text",{staticClass:"iconfont icon-lingquhongbao",staticStyle:{"font-size":"64upx",color:"#FCBF00"}},[i("span")])],1),i("v-uni-view",{staticStyle:{float:"left"}},[i("v-uni-view",{staticStyle:{"text-align":"left",color:"#f6f6f6","margin-top":"52upx","margin-left":"20upx","font-size":"28upx",overflow:"hidden",width:"250upx",height:"44upx"}},[t._v(t._s(e.bean.descri))])],1)],1)],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.$store.state.img_url+e.bean.fromHeadpic+");"}),i("v-uni-view",{staticClass:"date"},[t._v(t._s(e.bean.date))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.$store.state.img_url+e.bean.fromHeadpic+");",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goUserDetail(e.bean.fromUid)}}}),i("v-uni-view",{staticClass:"main",staticStyle:{display:"block!important"}},[i("v-uni-view",{staticStyle:{height:"40upx","font-size":"12px",color:"#8799a3"}},[t._v(t._s(e.bean.fromName))]),i("v-uni-view",{staticStyle:{"background-color":"#FF3A36",width:"380upx",height:"150upx","border-radius":"6px"},style:e.bean.opened&&1==e.bean.opened?"opacity: .6;":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickHongbao(e.bean)}}},[i("v-uni-view",{staticStyle:{float:"left",height:"150upx"}},[i("v-uni-view",{staticStyle:{float:"left","margin-top":"40upx","margin-left":"20upx"}},[i("v-uni-text",{staticClass:"iconfont icon-lingquhongbao",staticStyle:{"font-size":"64upx",color:"#FCBF00"}},[i("span")])],1),i("v-uni-view",{staticStyle:{float:"left"}},[i("v-uni-view",{staticStyle:{"text-align":"left",color:"#f6f6f6","margin-top":"52upx","margin-left":"20upx","font-size":"28upx",overflow:"hidden",width:"250upx",height:"44upx"}},[t._v(t._s(e.bean.descri))])],1)],1)],1)],1),i("v-uni-view",{staticClass:"date "},[t._v(t._s(e.bean.date))])],1)]:[e.bean.fromUid==t.$store.state.user.id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content bg-green shadow",staticStyle:{"background-color":"#fff",color:"#222"}},["uparse"==e.bean.psr?i("u-parse",{attrs:{content:e.bean.txt},on:{preview:function(e){arguments[0]=e=t.$handleEvent(e),t.preview.apply(void 0,arguments)},navigate:function(e){arguments[0]=e=t.$handleEvent(e),t.navigate.apply(void 0,arguments)}}}):"voice"==e.bean.psr?i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickVoice(e.bean.txt,a)}}},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex!=a,expression:"selVoiceIndex != index"}],staticClass:"iconfont icon-yuyin1 text-xxl ",staticStyle:{float:"left",width:"100upx","font-size":"52upx",position:"relative",top:"4upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex!=a,expression:"selVoiceIndex != index"}],staticStyle:{float:"left","font-size":"26upx",position:"relative",top:"4upx"}},[t._v(t._s(e.bean.sub_txt)+'"')]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex==a,expression:"selVoiceIndex == index"}],staticClass:"iconfont cu-load load-cuIcon loading text-xxl ",staticStyle:{float:"left",width:"100upx","font-size":"52upx",position:"relative","text-align":"left",top:"0","line-height":"38upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex==a,expression:"selVoiceIndex == index"}],staticStyle:{float:"left","font-size":"26upx",position:"relative",top:"6upx"}},[t._v(t._s(e.bean.sub_txt)+'"')])],1):"video"==e.bean.psr?i("v-uni-video",{attrs:{direction:"0",src:t.$store.state.img_url+e.bean.txt}}):i("v-uni-rich-text",{attrs:{nodes:e.bean.txt}})],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.$store.state.img_url+e.bean.fromHeadpic+");"}),i("v-uni-view",{staticClass:"date"},[t._v(t._s(e.bean.date))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.$store.state.img_url+e.bean.fromHeadpic+");",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goUserDetail(e.bean.fromUid)}}}),i("v-uni-view",{staticClass:"main",staticStyle:{display:"block!important"}},[i("v-uni-view",{staticStyle:{height:"40upx","font-size":"12px",color:"#8799a3"}},[t._v(t._s(e.bean.fromName))]),i("v-uni-view",{staticClass:"content shadow",staticStyle:{color:"#222"}},["uparse"==e.bean.psr?i("u-parse",{attrs:{content:e.bean.txt},on:{preview:function(e){arguments[0]=e=t.$handleEvent(e),t.preview.apply(void 0,arguments)},navigate:function(e){arguments[0]=e=t.$handleEvent(e),t.navigate.apply(void 0,arguments)}}}):"voice"==e.bean.psr?i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickVoice(e.bean.txt,a)}}},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex!=a,expression:"selVoiceIndex != index"}],staticClass:"iconfont icon-yuyin1 text-xxl ",staticStyle:{"text-align":"right",float:"right",width:"100upx","font-size":"52upx",position:"relative",top:"4upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex!=a,expression:"selVoiceIndex != index"}],staticStyle:{float:"right","font-size":"26upx",position:"relative",top:"4upx"}},[t._v(t._s(e.bean.sub_txt)+'"')]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex==a,expression:"selVoiceIndex == index"}],staticClass:"iconfont cu-load load-cuIcon loading text-xxl ",staticStyle:{"text-align":"right",float:"right",width:"100upx","font-size":"52upx",position:"relative",top:"0","line-height":"38upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex==a,expression:"selVoiceIndex == index"}],staticStyle:{float:"right","font-size":"26upx",position:"relative",top:"6upx"}},[t._v(t._s(e.bean.sub_txt)+'"')])],1):"video"==e.bean.psr?i("v-uni-video",{attrs:{direction:"0",src:t.$store.state.img_url+e.bean.txt}}):i("v-uni-rich-text",{attrs:{nodes:e.bean.txt}})],1)],1),i("v-uni-view",{staticClass:"date "},[t._v(t._s(e.bean.date))])],1)]]}))],2),i("openRed",{directives:[{name:"show",rawName:"v-show",value:t.showOpenRed,expression:"showOpenRed"}],on:{hide:function(e){arguments[0]=e=t.$handleEvent(e),t.hideOpenRed.apply(void 0,arguments)},openRedDetail:function(e){arguments[0]=e=t.$handleEvent(e),t.openRedDetail.apply(void 0,arguments)}}})],1)},o=[]},a514:function(t,e,i){"use strict";i.r(e);var a=i("067b"),n=i("be7f");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);var s,l=i("f0c5"),u=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"41aee310",null,!1,a["a"],s);e["default"]=u.exports},acef:function(t,e,i){"use strict";(function(t){var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,o=a(i("ade3")),s=a(i("bd22")),l=a(i("386b")),u=(uni.createInnerAudioContext(),{components:{uParse:s.default,openRed:l.default},data:function(){return{list:[],player:null,selVoiceIndex:-1,domHeight:0,c_type:1,InputBottom:0,toid:"",entity:{},txt:"",temp_txt:"",showjia:!0,emotion:1,showItem:0,scrollTop:0,style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},sendCount:0,RECORDER:uni.getRecorderManager(),AUDIO:uni.createInnerAudioContext(),recordTimer:null,recordLength:0,voicePath:"",isRecord:!1,intervalTime:0,timer:null,v_base64:"",winSize:{},showShade:!1,showPop:!1,popButton:["复制","转发","收藏","删除","撤消"],popButtonStore:["复制","转发","收藏","删除","撤消"],popStyle:"",pickerUserIndex:-1,temp_content:"",temp_uuid:"",chatCfg:{},temp_bean:null,showOpenRed:!1,stopSpeak:0}},onLoad:function(t){var e=this,i=uni.getStorageSync("USER"),a=uni.getStorageSync(i.id+"#"+this.$store.state.cur_chat_entity.id+"_CHAT_MESSAGE");if(a&&""!=a){var n=JSON.parse(a);e.list=n}setTimeout((function(){uni.pageScrollTo({scrollTop:9999999999,duration:0})}),50)},methods:(n={getPopButton:function(t){return"复制"==t?"icon-fuzhi":"转发"==t?"icon-zhuanfa":"收藏"==t?"icon-collection-b":"删除"==t?"icon-shanchu":"撤消"==t?"icon-shangjiachexiaoshenqingrenzhengliebiao":""},clickCard:function(t){this.goUserDetail(t.muuid)},sendCard:function(){1!=this.stopSpeak&&this.checkStopSpeak()&&(this.showPop=!1,this.showItem=0,this.InputBottom=0,uni.navigateTo({url:"/pages/chat/card/sendCard"}),this.$store.state.temp.bean=this.entity)},openRedDetail:function(){this.showOpenRed=!1,uni.navigateTo({url:"/pages/chat/red/red_detail"})},hideOpenRed:function(){this.showOpenRed=!1},clickHongbao:function(t){var e=uni.getStorageSync("USER"),i=uni.getStorageSync(e.id+"_RED_MUST_UPDATE_MAP");if(i&&""!=i){var a=JSON.parse(i);this.temp_bean=a[t.redUUID],a[t.redUUID]&&(t=a[t.redUUID])}this.temp_bean=t,this.showOpenRed=!0,this.$store.state.temp.bean=this.temp_bean},clickVoice:function(t,e){var i=this;if(this.selVoiceIndex==e)return this.selVoiceIndex=-1,void(this.player&&this.player.stop());this.selVoiceIndex=e,this.player=plus.audio.createPlayer(t),this.player.play((function(){i.selVoiceIndex=-1}),(function(t){}))},goUserDetail:function(t){uni.navigateTo({url:"/pages/chat/user_detail?id="+t})},goMgr:function(t){uni.navigateTo({url:"/pages/chat/user/mgr?id="+t})},send:function(){var t={txt:this.txt,toUid:this.toid,fromUid:this.$store.state.user.id};this.$websocket.dispatch("WEBSOCKET_SEND","{body:'"+JSON.stringify(t)+"',CMD:'USER_CHAT_SEND_TXT'}")},InputFocus:function(t){this.InputBottom=t.detail.height},InputBlur:function(t){this.InputBottom=0}},(0,o.default)(n,"clickVoice",(function(t,e){var i=this;if(this.selVoiceIndex==e)return this.selVoiceIndex=-1,void(this.player&&this.player.stop());this.selVoiceIndex=e,this.player=plus.audio.createPlayer(t),this.player.play((function(){i.selVoiceIndex=-1}),(function(t){}))})),(0,o.default)(n,"scrollToBottom",(function(){setTimeout((function(){uni.pageScrollTo({scrollTop:9999999999,duration:0})}),100)})),n)});e.default=u}).call(this,i("5a52")["default"])},be7f:function(t,e,i){"use strict";i.r(e);var a=i("acef"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a}}]);