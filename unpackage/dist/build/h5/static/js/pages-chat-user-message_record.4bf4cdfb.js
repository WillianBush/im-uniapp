(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-user-message_record"],{"5ad4":function(t,e,i){"use strict";i.r(e);var n=i("8be0"),a=i("6f4e");for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);var s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"385396e4",null,!1,n["a"],void 0);e["default"]=u.exports},"6f4e":function(t,e,i){"use strict";i.r(e);var n=i("f0e4"),a=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"8be0":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uParse:i("81b6").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0,nameToLeft:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"}),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("历史聊天记录")]),i("template",{attrs:{slot:"right"},slot:"right"})],2),i("v-uni-view",{staticClass:"cu-chat"},[t.list.length<=0?i("v-uni-view",{staticStyle:{"text-align":"center",color:"#aaa","margin-top":"60upx","font-size":"28upx"}},[t._v("暂无聊天记录")]):t._e(),t._l(t.curChatMsgList,(function(e,n){return[e.opt&&"undo"==e.opt?[i("v-uni-view",{staticStyle:{display:"none"}})]:"SYS_TXT"==e.type?[i("v-uni-view",{staticClass:"cu-info round"},[i("v-uni-rich-text",{attrs:{nodes:e.bean.txt}})],1)]:"USER_CARD"==e.type?[e.bean.fromUid==t.user.id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticStyle:{border:"1px solid #eee","background-color":"#fff",width:"400upx",height:"180upx","border-radius":"6px"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickCard(e.bean)}}},[i("v-uni-view",{staticStyle:{height:"130upx","border-bottom":"1px solid #eee",width:"90%",margin:"auto auto",display:"flex"}},[i("v-uni-view",{staticClass:"cu-avatar radius",staticStyle:{width:"80upx","margin-top":"26upx",height:"80upx"},style:"background-image:url("+t.getHeadPic(e.bean.mheadpic)+");"}),i("v-uni-view",{staticStyle:{width:"240upx","margin-top":"30upx","margin-left":"12upx","text-align":"left"}},[i("v-uni-view",{staticStyle:{overflow:"hidden","word-break":"keep-all","text-overflow":"ellipsis"}},[t._v(t._s(e.bean.mname))]),i("v-uni-view",{staticStyle:{color:"#bbb","font-size":"24upx","margin-top":"8upx"}},[t._v("ID："+t._s(e.bean.mid))])],1)],1),i("v-uni-view",{staticStyle:{height:"50upx","line-height":"50upx","text-align":"left","font-size":"23upx","padding-left":"20upx",color:"#777"}},[t._v("个人名片")])],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.getHeadPic(e.bean.fromHeadpic)+");"}),i("v-uni-view",{staticClass:"date"},[t._v(t._s(e.bean.date))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.getHeadPic(e.bean.fromHeadpic)+");",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goUserDetail(e.bean.fromUid)}}}),i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticStyle:{border:"1px solid #eee","background-color":"#fff",width:"400upx",height:"180upx","border-radius":"6px"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickCard(e.bean)}}},[i("v-uni-view",{staticStyle:{height:"130upx","border-bottom":"1px solid #eee",width:"90%",margin:"auto auto",display:"flex"}},[i("v-uni-view",{staticClass:"cu-avatar radius",staticStyle:{width:"80upx","margin-top":"26upx",height:"80upx"},style:"background-image:url("+t.getHeadPic(e.bean.mheadpic)+");"}),i("v-uni-view",{staticStyle:{width:"240upx","margin-top":"30upx","margin-left":"12upx","text-align":"left"}},[i("v-uni-view",{staticStyle:{overflow:"hidden","word-break":"keep-all","text-overflow":"ellipsis"}},[t._v(t._s(e.bean.mname))]),i("v-uni-view",{staticStyle:{color:"#bbb","font-size":"24upx","margin-top":"8upx"}},[t._v("ID："+t._s(e.bean.mid))])],1)],1),i("v-uni-view",{staticStyle:{height:"50upx","line-height":"50upx","text-align":"left","font-size":"23upx","padding-left":"20upx",color:"#777"}},[t._v("个人名片")])],1)],1),i("v-uni-view",{staticClass:"date "},[t._v(t._s(e.bean.date))])],1)]:[e.bean.fromUid==t.user.id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[0==e.bean.read?i("v-uni-view",{staticStyle:{"margin-right":"30upx",color:"#999","font-size":"24upx"}},[t._v("未读")]):t._e(),1==e.bean.read?i("v-uni-view",{staticStyle:{"margin-right":"30upx",color:"#999","font-size":"24upx"}},[t._v("已读")]):t._e(),i("v-uni-view",{staticClass:"content bg-green shadow",staticStyle:{"background-color":"#98E165",color:"#222"}},["uparse"==e.bean.psr?i("u-parse",{attrs:{content:e.bean.txt},on:{preview:function(e){arguments[0]=e=t.$handleEvent(e),t.preview.apply(void 0,arguments)},navigate:function(e){arguments[0]=e=t.$handleEvent(e),t.navigate.apply(void 0,arguments)}}}):"voice"==e.bean.psr?i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickVoice(e.bean.txt,n)}}},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex!=n,expression:"selVoiceIndex != index"}],staticClass:"iconfont icon-yuyin1 text-xxl ",staticStyle:{float:"left",width:"100upx","font-size":"52upx",position:"relative",top:"4upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex!=n,expression:"selVoiceIndex != index"}],staticStyle:{float:"left","font-size":"26upx",position:"relative",top:"4upx"}},[t._v(t._s(e.bean.sub_txt)+'"')]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex==n,expression:"selVoiceIndex == index"}],staticClass:"iconfont cu-load load-cuIcon loading text-xxl ",staticStyle:{float:"left",width:"100upx","font-size":"52upx",position:"relative","text-align":"left",top:"0","line-height":"38upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex==n,expression:"selVoiceIndex == index"}],staticStyle:{float:"left","font-size":"26upx",position:"relative",top:"6upx"}},[t._v(t._s(e.bean.sub_txt)+'"')])],1):"video"==e.bean.psr?i("v-uni-video",{attrs:{direction:"0",src:t.imgUrl+e.bean.txt}}):i("v-uni-rich-text",{attrs:{nodes:e.bean.txt}})],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.getHeadPic(e.bean.fromHeadpic)+");"}),i("v-uni-view",{staticClass:"date"},[t._v(t._s(e.bean.date))])],1):i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:"background-image:url("+t.getHeadPic(e.bean.fromHeadpic)+");",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.goUserDetail(e.bean.fromUid)}}}),i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content shadow",staticStyle:{color:"#222"}},["uparse"==e.bean.psr?i("u-parse",{attrs:{content:e.bean.txt},on:{preview:function(e){arguments[0]=e=t.$handleEvent(e),t.preview.apply(void 0,arguments)},navigate:function(e){arguments[0]=e=t.$handleEvent(e),t.navigate.apply(void 0,arguments)}}}):"voice"==e.bean.psr?i("v-uni-view",{on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clickVoice(e.bean.txt,n)}}},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex!=n,expression:"selVoiceIndex != index"}],staticClass:"iconfont icon-yuyin1 text-xxl ",staticStyle:{"text-align":"right",float:"right",width:"100upx","font-size":"52upx",position:"relative",top:"4upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex!=n,expression:"selVoiceIndex != index"}],staticStyle:{float:"right","font-size":"26upx",position:"relative",top:"4upx"}},[t._v(t._s(e.bean.sub_txt)+'"')]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex==n,expression:"selVoiceIndex == index"}],staticClass:"iconfont cu-load load-cuIcon loading text-xxl ",staticStyle:{"text-align":"right",float:"right",width:"100upx","font-size":"52upx",position:"relative",top:"0","line-height":"38upx"}}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:t.selVoiceIndex==n,expression:"selVoiceIndex == index"}],staticStyle:{float:"right","font-size":"26upx",position:"relative",top:"6upx"}},[t._v(t._s(e.bean.sub_txt)+'"')])],1):"video"==e.bean.psr?i("v-uni-video",{attrs:{direction:"0",src:t.imgUrl+e.bean.txt}}):i("v-uni-rich-text",{attrs:{nodes:e.bean.txt}})],1)],1),i("v-uni-view",{staticClass:"date "},[t._v(t._s(e.bean.date))])],1)]]}))],2)],1)},o=[]},f0e4:function(t,e,i){"use strict";(function(t){i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("5530")),o=n(i("81b6")),s=i("26cb"),u=(i("99bd"),i("d648")),l=(uni.createInnerAudioContext(),{components:{uParse:o.default},computed:(0,a.default)((0,a.default)((0,a.default)({},(0,s.mapState)("user",["user","userToken","unReadMsgSum"])),(0,s.mapState)("app",["imgUrl","reqUrl"])),(0,s.mapState)("chat",["curChatMsgList","chatMyLoadding","chatMessageMap","curChatEntity"])),data:function(){return{list:[],player:null,selVoiceIndex:-1,domHeight:0,c_type:1,InputBottom:0,toid:"",entity:{},txt:"",temp_txt:"",showjia:!0,showItem:0,scrollTop:0,style:{pageHeight:0,contentViewHeight:0,footViewHeight:90,mitemHeight:0},sendCount:0,RECORDER:"",AUDIO:uni.createInnerAudioContext(),recordTimer:null,recordLength:0,voicePath:"",isRecord:!1,intervalTime:0,timer:null,v_base64:"",winSize:{},showShade:!1,showPop:!1,popButton:["复制","转发","收藏","删除","撤消"],popButtonStore:["复制","转发","收藏","删除","撤消"],popStyle:"",pickerUserIndex:-1,temp_content:"",temp_uuid:"",chatCfg:{},temp_bean:null,showname:""}},onLoad:function(t){var e=uni.getStorageSync("USER"),i=uni.getStorageSync(e.id+"#"+this.curChatEntity.id+"_CHAT_MESSAGE");if(i&&""!=i){var n=JSON.parse(i);this.list=n}setTimeout((function(){uni.pageScrollTo({scrollTop:9999999999,duration:0})}),50)},methods:(0,a.default)((0,a.default)({},(0,s.mapMutations)("chat",["setCurChatMsgList","setCurChatEntity","setChatMyLoadding","updateChatMessageMap","setTempBean"])),{},{getHeadPic:function(t){return(0,u.getHeadPic)(t,this.imgUrl)},getPopButton:function(t){return"复制"==t?"icon-fuzhi":"转发"==t?"icon-zhuanfa":"收藏"==t?"icon-collection-b":"删除"==t?"icon-shanchu":"撤消"==t?"icon-shangjiachexiaoshenqingrenzhengliebiao":""},clickCard:function(t){this.goUserDetail(t.muuid)},sendCard:function(){this.showPop=!1,this.showItem=0,this.InputBottom=0,uni.navigateTo({url:"/pages/chat/card/sendCard"}),this.setTempBean(this.entity)},goFavourite:function(){uni.navigateTo({url:"/pages/mine/favourite_list"})},clickChat:function(){this.showPop=!1,this.showItem=0,this.InputBottom=0},scrollToBottom:function(){setTimeout((function(){uni.pageScrollTo({scrollTop:9999999999,duration:0})}),100)},clickVoice:function(t,e){var i=this;if(this.selVoiceIndex==e)return this.selVoiceIndex=-1,void(this.player&&this.player.stop());this.selVoiceIndex=e,this.player=plus.audio.createPlayer(t),this.player.play((function(){i.selVoiceIndex=-1}),(function(t){}))},getWindowSize:function(){var t=this;uni.getSystemInfo({success:function(e){t.winSize={witdh:e.windowWidth,height:e.windowHeight}}})},goUserDetail:function(t){uni.navigateTo({url:"/pages/chat/user_detail?id="+t})},goMgr:function(t){uni.navigateTo({url:"/pages/chat/user/mgr?id="+t})},InputFocus:function(t){this.InputBottom=t.detail.height},InputBlur:function(t){this.InputBottom=0}})});e.default=l}).call(this,i("5a52")["default"])}}]);