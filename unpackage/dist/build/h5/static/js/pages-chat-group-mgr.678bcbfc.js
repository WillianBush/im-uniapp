(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-group-mgr"],{"1ff7":function(t,i,e){"use strict";e.r(i);var n=e("bb0f"),a=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(s);i["default"]=a.a},"3fda":function(t,i,e){"use strict";e.r(i);var n=e("409e"),a=e("1ff7");for(var s in a)["default"].indexOf(s)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(s);var o=e("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"657abfba",null,!1,n["a"],void 0);i["default"]=c.exports},"409e":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.curChatEntity&&t.curChatEntity.owner_UUID&&""!=t.curChatEntity.owner_UUID?e("v-uni-view",{staticStyle:{"padding-bottom":"60upx"}},[e("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0,nameToLeft:!0}},[e("template",{attrs:{slot:"backText"},slot:"backText"}),e("template",{attrs:{slot:"content"},slot:"content"},[t._v("群组信息")]),e("template",{attrs:{slot:"right"},slot:"right"})],2),e("v-uni-view",{staticClass:"margin-top",staticStyle:{background:"#fff",width:"96%",margin:"auto auto","margin-top":"10px"}},[t.isEmployee?e("v-uni-view",{staticStyle:{height:"60upx",width:"90%",margin:"auto auto","padding-top":"20upx"}},[e("v-uni-text",{staticStyle:{float:"left","font-weight":"800",color:"#333"}},[t._v("群成员")]),e("v-uni-text",{staticClass:"lg text-gray cuIcon-right",staticStyle:{float:"right","margin-top":"6upx"}}),e("v-uni-text",{staticStyle:{"font-size":"26upx",float:"right",color:"#aaa"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.lookMemberList()}}},[t._v("查看"+t._s(t.curChatEntity.memberCount)+"名群成员")])],1):t._e(),t.isEmployee?e("v-uni-view",{staticStyle:{display:"flex",width:"100%"}},[e("v-uni-view",{staticStyle:{"padding-top":"30upx","padding-bottom":"30upx","margin-left":"10upx",flex:"1","line-height":"140upx"}},[t._l(t.curChatEntity.top5Hp,(function(i,n){return e("v-uni-view",{staticClass:"cu-avatar round margin-left",style:"height:100upx;width:100upx;background-image:url("+t.imgUrl+i+");",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goUserDetail(n)}}})})),t._e()],2)],1):t._e()],1),e("v-uni-view",{staticClass:"cu-list menu",staticStyle:{clear:"both",width:"96%",margin:"auto auto","margin-top":"10px!important"}},[(t.user.id==t.curChatEntity.owner_UUID||t.curChatEntity.memberMgr_ids.indexOf(t.user.id)>=0)&&1==t.shimingCfg.shiming?e("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.lookNotShimingMemberList()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("查看未实名群成员")])],1)],1):t._e(),t.user.id==t.curChatEntity.owner_UUID||t.curChatEntity.memberMgr_ids.indexOf(t.user.id)>=0?e("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goAddMember()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("邀请群成员")])],1)],1):t._e(),t.user.id==t.curChatEntity.owner_UUID||t.$curChatEntity.memberMgr_ids.indexOf(t.user.id)>=0?e("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goRemoveMember()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("移除群成员")])],1)],1):t._e(),t.user.id==t.curChatEntity.owner_UUID?e("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goMgrset.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("群设置")])],1)],1):t._e(),t.user.id==t.curChatEntity.owner_UUID||t.curChatEntity.memberMgr_ids.indexOf(t.user.id)>=0?e("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goSssList.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("成员禁言管理")])],1)],1):t._e(),t.user.id==t.curChatEntity.owner_UUID||t.curChatEntity.memberMgr_ids.indexOf(t.user.id)>=0?e("v-uni-view",{staticClass:"cu-item arrow margin-top",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.editGroupName()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("群组名称")]),e("v-uni-text",{staticClass:"text-grey text-sm",staticStyle:{float:"right",color:"#aaa","font-size":"26upx"}},[t._v(t._s(t.curChatEntity.name))])],1)],1):e("v-uni-view",{staticClass:"cu-item margin-top"},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("群组名称")]),e("v-uni-text",{staticClass:"text-grey text-sm",staticStyle:{float:"right",color:"#aaa","font-size":"26upx"}},[t._v(t._s(t.curChatEntity.name))])],1)],1),t.user.id==t.curChatEntity.owner_UUID||t.curChatEntity.memberMgr_ids.indexOf(t.user.id)>=0?e("v-uni-view",{staticClass:"cu-item  margin-top"},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("群组ID")]),e("v-uni-text",{staticClass:"text-grey text-sm",staticStyle:{float:"right",color:"#aaa","font-size":"26upx"}},[t._v(t._s(t.curChatEntity.roomid))])],1)],1):t._e(),t.user.id==t.curChatEntity.owner_UUID||t.curChatEntity.memberMgr_ids.indexOf(t.user.id)>=0?e("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.edit_pic()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("群组头像")]),e("v-uni-view",{staticClass:"cu-avatar round lg",style:"width:60upx;height:60upx;float: right;background-image: url("+t.imgUrl+t.curChatEntity.img+");"})],1)],1):t._e(),t._e(),t.user.id==t.curChatEntity.owner_UUID||t.curChatEntity.memberMgr_ids.indexOf(t.user.id)>=0?e("v-uni-view",{staticClass:"cu-item arrow ",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.editGroupNotice()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("群公告")])],1)],1):e("v-uni-view",{staticClass:"cu-item  "},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("群公告")])],1)],1),e("v-uni-view",{staticClass:"text-grey text-sm",staticStyle:{position:"relative",top:"-10upx",color:"#bbb","font-size":"26upx",background:"#fff",padding:"20upx","line-height":"40upx","word-wrap":"break-word","word-break":"normal"}},[t._v(t._s(t.curChatEntity.descri))]),e("v-uni-view",{staticClass:"cu-item arrow margin-top",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goMsgRecord()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("查看聊天记录")])],1)],1),e("v-uni-view",{staticClass:"cu-form-group margin-top"},[e("v-uni-view",{staticClass:"title"},[t._v("消息免打扰")]),e("v-uni-switch",{class:t.switchA?"checked":"",attrs:{checked:!!t.switchA},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.SwitchA.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"cu-item cu-form-group"},[e("v-uni-view",{staticClass:"title"},[t._v("置顶聊天")]),e("v-uni-switch",{class:t.switchB?"checked":"",attrs:{checked:!!t.switchB},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.SwitchB.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"cu-item margin-top arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.clearChatMsg()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("清空聊天记录")])],1)],1),t.user.id!=t.curChatEntity.owner_UUID?e("v-uni-view",{staticClass:"cu-item margin-top arrow",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tousu()}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("投诉此群")])],1)],1):t._e(),t.user.id!=t.curChatEntity.owner_UUID?e("v-uni-view",{staticClass:"cu-item margin-top",staticStyle:{"margin-bottom":"80upx"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.outGroup()}}},[e("v-uni-view",{staticClass:"content",staticStyle:{"text-align":"center"}},[e("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#FF2442"}},[t._v("退出群组")])],1)],1):t._e()],1)],1):t._e()},a=[]},bb0f:function(t,i,e){"use strict";e("7a82");var n=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("498a"),e("d3b7"),e("159b"),e("14d9"),e("4e82"),e("99af");var a=n(e("5530")),s=e("26cb"),o=e("7f8e"),c={data:function(){return{switchA:!1,switchB:!1,switchC:!1,id:"",showTransferGroupModal:!1,to_member_id:""}},computed:(0,a.default)((0,a.default)((0,a.default)({i18n:function(){return this.$t("index")}},(0,s.mapState)("chat",["curChatEntity","chatMessageMap","arList"])),(0,s.mapState)("user",["user","isEmployee","shimingCfg"])),(0,s.mapState)("app",["imgUrl"])),onLoad:function(t){this.id=t.id,this.switchC=1==this.curChatEntity.stopSpeak;var i=uni.getStorageSync(this.id+"_darao");i&&""!=i&&(this.switchA=i);var e=uni.getStorageSync(this.id+"_zhiding");e&&""!=e&&(this.switchB=e),this.getShimingCfgAction()},methods:(0,a.default)((0,a.default)((0,a.default)((0,a.default)((0,a.default)({},(0,s.mapActions)("user",["getShimingCfgAction"])),(0,s.mapActions)("chat",["getRoomConfigAction","transferGroupAction","dissolveGroupAction","logoutGroupAction","uStopSpeakAction"])),(0,s.mapMutations)("chat",["setCurChatMsgList","setArListShow"])),(0,s.mapActions)("socket",["WEBSOCKET_SEND"])),{},{goUserDetail:function(t){var i=this,e=i.curChatEntity.member_ids.split("#"),n=e[t];i.getRoomConfigAction().then((function(t){t&&uni.navigateTo({url:"/pages/chat/user_detail?id="+n+"&room_id="+i.curChatEntity.id})}))},goSssList:function(){uni.navigateTo({url:"/pages/chat/group/sss_list"})},goMgrset:function(){uni.navigateTo({url:"/pages/chat/group/mgrSet"})},yaoqi:function(){uni.navigateTo({url:"/pages/chat/group/yaoqi"})},hideModal:function(){this.showTransferGroupModal=!1},showModal:function(){this.showTransferGroupModal=!0},tousu:function(){},goQrcode:function(){uni.navigateTo({url:"./qrCode"})},transferGroup:function(){uni.getStorageSync("USER");""!=this.to_member_id.trim()?this.transferGroupAction({roomid:this.curChatEntity.id,toUid:this.to_member_id.trim()}):uni.showToast({icon:"none",position:"bottom",title:"请填写用户ID"})},dissolveGroup:function(){var t=this;uni.getStorageSync("USER");uni.showModal({title:"请确认",content:"是否解散此群组?",success:function(i){i.confirm&&t.dissolveGroupAction({roomid:t.curChatEntity.id})}})},outGroup:function(){var t=this;uni.showModal({title:"请确认",content:"是否退出此群组?",success:function(i){i.confirm&&t.logoutGroupAction({roomid:t.curChatEntity.id})}})},edit_pic:function(){uni.navigateTo({url:"/pages/chat/group/upd_pic"})},editGroupNotice:function(){uni.navigateTo({url:"/pages/chat/group/upd_notice"})},editGroupName:function(){uni.navigateTo({url:"/pages/chat/group/upd_name"})},goAddMember:function(){uni.navigateTo({url:"/pages/chat/group/add_member"})},goRemoveMember:function(){uni.navigateTo({url:"/pages/chat/group/member_list_remove"})},lookNotShimingMemberList:function(){uni.navigateTo({url:"/pages/chat/group/not_shiming_member_list"})},lookMemberList:function(){uni.navigateTo({url:"/pages/chat/group/member_list"})},goMsgRecord:function(){uni.navigateTo({url:"/pages/chat/group/message_record"})},clearChatMsg:function(){var t=this,i=uni.getStorageSync("USER");uni.showModal({title:"请确认",content:"是否清空聊天记录?",success:function(e){e.confirm&&(t.chatMessageMap.delete(i.id+"#"+t.curChatEntity.id),uni.removeStorageSync(i.id+"#"+t.curChatEntity.id+"_CHAT_MESSAGE"),t.setCurChatMsgList([]),uni.removeStorageSync(i.id+"#"+t.curChatEntity.id+"_CHAT_MESSAGE_LASTCONTENT"),uni.removeStorageSync(i.id+"#"+t.curChatEntity.id+"_CHAT_MESSAGE_UNREAD"),uni.showToast({title:"清除成功",duration:2e3}),t.WEBSOCKET_SEND({body:i.id+"#"+t.id,CMD:o.MessageType.CLEAR_CHAT_MSG_SINGLE_CLOUD}))}})},SwitchC:function(t){this.switchC=t.detail.value;var i=0;t.detail.value&&(i=1),this.uStopSpeakAction({roomid:this.curChatEntity.id,stopSpeak:i})},SwitchA:function(t){this.switchA=t.detail.value,uni.setStorageSync(this.id+"_darao",t.detail.value)},SwitchB:function(t){this.switchB=t.detail.value,uni.setStorageSync(this.id+"_zhiding",t.detail.value);var i=this.arList,e=[],n=[];i.forEach((function(t){var i=uni.getStorageSync(t.id+"_zhiding");i?(t.top=0,n.push(t)):e.push(t)})),e.sort((function(t,i){return i.createDateTime-t.createDateTime})),n.sort((function(t,i){return i.createDateTime-t.createDateTime})),this.setArListShow(n.concat(e))}})};i.default=c}}]);