(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-mine-wallet-sel_bank_list"],{1860:function(t,e,n){"use strict";n.r(e);var a=n("cd92"),i=n("658b");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("62e3");var o,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"10e09b0e",null,!1,a["a"],o);e["default"]=s.exports},"35de":function(t,e,n){"use strict";n.r(e);var a=n("d8db"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"62e3":function(t,e,n){"use strict";var a=n("e94a"),i=n.n(a);i.a},"658b":function(t,e,n){"use strict";n.r(e);var a=n("c843"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"680c":function(t,e,n){"use strict";n.r(e);var a=n("9612"),i=n("35de");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var o,u=n("f0c5"),s=Object(u["a"])(i["default"],a["b"],a["c"],!1,null,"15bb9d90",null,!1,a["a"],o);e["default"]=s.exports},"6d7e":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'.omit[data-v-10e09b0e]{font-size:%?48?%;margin-right:%?30?%}.card-code[data-v-10e09b0e]{margin-top:%?15?%;display:flex;justify-content:flex-end;color:#fff;font-size:%?38?%}.flex-1[data-v-10e09b0e]{flex:1}.card-type[data-v-10e09b0e]{font-size:%?24?%;color:#f1f1f1}.bank-name[data-v-10e09b0e]{font-size:%?32?%;color:#fff}.bank-info[data-v-10e09b0e]{display:flex;flex-direction:column;margin-left:%?30?%}.bank-head[data-v-10e09b0e]{display:flex;flex:1;align-items:center}.bank-head uni-image[data-v-10e09b0e]{width:%?100?%;height:%?100?%;padding:%?15?%;background-color:#fff;border-radius:50%;overflow:hidden}.bank-icon[data-v-10e09b0e]{position:absolute;top:%?20?%;left:%?20?%;width:%?100?%;height:%?100?%}.bank-watermark[data-v-10e09b0e]{position:absolute;right:%?-184?%;bottom:%?0?%;width:%?144?%;height:%?90?%;background-repeat:no-repeat;-webkit-filter:drop-shadow(%?-204?% %?0?% %?0?% #fff);filter:drop-shadow(%?-204?% %?0?% %?0?% #fff);opacity:.1}.bank-item[data-v-10e09b0e]{width:92%;margin:auto auto;position:relative;flex:1;height:%?280?%;margin-top:%?20?%;position:relative;border-radius:%?20?%;padding:%?20?%}.bank-item[data-v-10e09b0e]:after{content:"";display:block;background:inherit;-webkit-filter:blur(%?10?%);filter:blur(%?10?%);position:absolute;width:100%;height:100%;top:%?10?%;left:%?10?%;z-index:-1;opacity:.4;-webkit-transform-origin:0 0;transform-origin:0 0;border-radius:inherit;-webkit-transform:scale(1);transform:scale(1)}',""]),t.exports=e},9612:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var a={bankItem:n("1860").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticStyle:{"background-color":"#fff",height:"100vh"}},[n("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0,nameToLeft:!0}},[n("template",{attrs:{slot:"backText"},slot:"backText"}),n("template",{attrs:{slot:"content"},slot:"content"},[t._v("选择银行卡")])],2),t._l(t.list,(function(e,a){return n("bank-item",{key:a,attrs:{bankCode:e.code,bankName:e.name,cardCode:e.cardCode},nativeOn:{click:function(n){return t.selItem(e)}}})}))],2)},r=[]},c843:function(t,e,n){"use strict";(function(t){var a=n("4ea4");n("cb29"),n("4160"),n("d81d"),n("b64b"),n("d3b7"),n("e25e"),n("ac1f"),n("1276"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),r={name:"bankItem",props:{bankCode:{type:String,required:!0},bankName:{type:String,required:!0},cardType:{type:String,default:"储蓄卡"},cardCode:{type:String,required:!0}},computed:{waterMark:function(){return"background-image: url("+this.image+");"},endNumber:function(){var t=this.cardCode.length;return this.cardCode.substr(t-4,t)}},data:function(){var t=function(){return"bank_"+parseInt(1e8*Math.random())};return{bankThem:"",image:"",showCanvas:!0,uuid:t()}},methods:{buildItem:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.bankThem=uni.getStorageSync("BANK_"+t.bankCode),e.next=3,t.getBankLogo();case 3:return t.image=e.sent,e.next=6,t.getThemColor();case 6:t.showCanvas=!1;case 7:case"end":return e.stop()}}),e)})))()},getThemColor:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,a,i,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null==t.bankThem||""==t.bankThem){e.next=2;break}return e.abrupt("return");case 2:return n=uni.upx2px(100),a=uni.upx2px(72),t.iconContext=uni.createCanvasContext(t.uuid,t),t.iconContext.width=n,t.iconContext.height=n,t.iconContext.fillStyle="#FFFFFF",t.iconContext.beginPath(),i=n/2,t.iconContext.arc(i,i,i-1,0,2*Math.PI,0,!0),t.iconContext.closePath(),t.iconContext.fill(),r=n/2-a/2,t.iconContext.drawImage(t.image,r,r,a,a),e.next=17,t.draw(t.iconContext);case 17:return e.next=19,t.getImageData(r,a);case 19:o=e.sent,t.parsingImageData(o);case 21:case"end":return e.stop()}}),e)})))()},parsingImageData:function(t){for(var e={},n=0,a=t.length;n<a;n+=4){var i=t[n],r=t[n+1],o=t[n+2];if(i+r+o<400){var u=[i,r,o],s=u.join(", ");e[s]=null==e[s]?1:e[s]+1}}var c="";Object.keys(e).forEach((function(t){c=""===c?t:e[c]>e[t]?c:t}));var d=c.split(", ").map((function(t,e){if(t=parseInt(t),e>1)return t;var n=t+50;return n>255?255:n})).join(", ");this.bankThem="background-image: linear-gradient(45deg, rgba("+d+", 1), rgba("+c+", 1));",uni.setStorageSync("BANK_"+this.bankCode,this.bankThem)},getImageData:function(e,n){var a=this;return new Promise((function(i,r){uni.canvasGetImageData({canvasId:a.uuid,x:e,y:e,width:n,height:n,success:function(t){i(t.data)},fail:function(e){t("log",e," at components/bank-item/bank-item.vue:129"),r()}},a)}))},getBankLogo:function(){var e=this,n=this;return new Promise((function(a,i){t("log",e.bankCode," at components/bank-item/bank-item.vue:140"),uni.downloadFile({url:n.$store.state.req_url+"/images/bank_logo/"+e.bankCode+".png",success:function(t){a(t.tempFilePath)},fail:function(e){t("log",e," at components/bank-item/bank-item.vue:147"),i()}})}))},draw:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(n){t.draw(e,(function(){n()}))}))}},created:function(){var t=this;this.$nextTick((function(){t.buildItem()}))}};e.default=r}).call(this,n("0de9")["log"])},cb29:function(t,e,n){var a=n("23e7"),i=n("81d5"),r=n("44d2");a({target:"Array",proto:!0},{fill:i}),r("fill")},cd92:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"bank-item",style:t.bankThem},[t.showCanvas?n("v-uni-canvas",{staticClass:"bank-icon",attrs:{id:t.uuid,"canvas-id":t.uuid}}):t._e(),n("v-uni-view",{staticClass:"bank-head"},[n("v-uni-image",{attrs:{src:t.image}}),n("v-uni-view",{staticClass:"bank-info"},[n("v-uni-text",{staticClass:"bank-name"},[t._v(t._s(t.bankName))]),n("v-uni-text",{staticClass:"card-type"},[t._v(t._s(t.cardType))])],1)],1),n("v-uni-view",{staticClass:"card-code"},[n("v-uni-text",{staticClass:"omit"},[t._v("****")]),n("v-uni-text",{staticClass:"omit"},[t._v("****")]),n("v-uni-text",{staticClass:"omit"},[t._v("****")]),n("v-uni-text",[t._v(t._s(t.endNumber))])],1),n("v-uni-view",{staticClass:"bank-watermark",style:t.waterMark})],1)},r=[]},d8db:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("4ea4");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _bankItem=_interopRequireDefault(__webpack_require__("1860")),_default={components:{"bank-item":_bankItem.default},data:function(){return{list:[]}},onShow:function onShow(){this.list=[];var _this=this,user=this.$store.state.user;_this.$http.post("/user/bank/json/getList",{header:{"x-access-uid":user.id,"x-access-client":_this.$clientType}}).then((function(res){var res_data=eval(res.data);200==res_data.code?_this.list=res_data.body:uni.showToast({icon:"none",position:"bottom",title:res_data.msg})}))},methods:{selItem:function(t){uni.redirectTo({url:"withdraw/index?bank_id="+t.id})}}};exports.default=_default},e94a:function(t,e,n){var a=n("6d7e");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("1b81a77c",a,!0,{sourceMap:!1,shadowMode:!1})}}]);