(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-user-mgr"],{"5fd4":function(t,e,i){"use strict";var s;i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return s}));var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-blue",isBack:!0,nameToLeft:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"}),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("设置")]),i("template",{attrs:{slot:"right"},slot:"right"})],2),i("v-uni-view",{staticClass:"margin-top",staticStyle:{background:"#fff",display:"flex",width:"96%",margin:"auto auto","margin-top":"10px!important"}},[i("v-uni-view",{staticStyle:{width:"150upx","padding-top":"30upx","padding-bottom":"30upx","margin-left":"10upx"}},[i("v-uni-view",{staticClass:"cu-avatar radius margin-left",style:"height:100upx;width:100upx;background-image:url("+t.$store.state.img_url+t.cur_user.headpic+");"}),i("v-uni-view",{staticStyle:{margin:"auto auto",color:"#999","font-size":"24upx","text-align":"center","margin-top":"8upx",overflow:"hidden",height:"34upx",width:"100upx"}},[t._v(t._s(t.cur_user.nickName))])],1),i("v-uni-text",{staticClass:"iconfont icon-tianjiatupian",staticStyle:{"font-size":"120upx","margin-top":"20upx",color:"#999","margin-left":"20upx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.createGroup()}}})],1),i("v-uni-view",{staticClass:"cu-list menu",staticStyle:{clear:"both",width:"96%",margin:"auto auto","margin-top":"10px!important"}},[i("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editNote()}}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333",float:"left"}},[t._v("备注")]),i("v-uni-text",{staticClass:"text-grey text-sm",staticStyle:{float:"right",color:"#aaa","font-size":"26upx"}},[t._v(t._s(t.user_note))])],1)],1),i("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goMsgRecord()}}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("查看聊天记录")])],1)],1),i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[t._v("消息免打扰")]),i("v-uni-switch",{class:t.switchA?"checked":"",attrs:{checked:!!t.switchA},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.SwitchA.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"cu-item cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("置顶聊天")]),i("v-uni-switch",{class:t.switchB?"checked":"",attrs:{checked:!!t.switchB},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.SwitchB.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"cu-item cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("加入黑名单")]),i("v-uni-switch",{class:t.switchC?"checked":"",attrs:{checked:!!t.switchC},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.SwitchC.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"cu-item margin-top arrow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearChatMsg()}}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("清空聊天记录")])],1)],1),1==t.super_user?i("v-uni-view",{staticClass:"cu-item arrow",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearChatMsgBoth()}}},[i("v-uni-view",{staticClass:"content"},[i("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#333"}},[t._v("双向清除聊天记录")])],1)],1):t._e(),i("v-uni-view",{staticClass:"cu-item margin-top",staticStyle:{"margin-bottom":"80upx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.removeFriend()}}},[i("v-uni-view",{staticClass:"content",staticStyle:{"text-align":"center"}},[i("v-uni-text",{staticClass:"text-grey",staticStyle:{color:"#FF2442"}},[t._v("删除")])],1)],1)],1)],1)},n=[]},"79b2":function(t,e,i){"use strict";i.r(e);var s=i("5fd4"),a=i("f993");for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);var r,c=i("f0c5"),o=Object(c["a"])(a["default"],s["b"],s["c"],!1,null,"702a07ac",null,!1,s["a"],r);e["default"]=o.exports},8157:function(module,exports,__webpack_require__){"use strict";(function(console){__webpack_require__("99af"),__webpack_require__("4de4"),__webpack_require__("4160"),__webpack_require__("4e82"),__webpack_require__("e25e"),__webpack_require__("159b"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={data:function(){return{switchA:!1,switchB:!1,switchC:!1,id:"",cur_user:{},super_user:0,user_note:""}},onShow:function(){var t=uni.getStorageSync(this.id+"_NOTE");t&&""!=t&&(this.user_note=t)},onLoad:function onLoad(e){this.id=e.id;var _this=this;_this.$http.post("/user/json/loadById/v1",{id:this.id},{header:{"x-access-client":_this.$clientType}}).then((function(res){var res_data=eval(res.data);if(200==res_data.code){_this.cur_user=res_data.body;var s=uni.getStorageSync(_this.id+"_NOTE");s&&""!=s&&(_this.cur_user.nickName=s)}})),_this.$http.post("/user/json/isSuperUser",{header:{"x-access-uid":_this.$store.state.user.id,"x-access-client":_this.$clientType}}).then((function(res){var res_data=eval(res.data);200==res_data.code&&(_this.super_user=parseInt(res_data.msg))})),_this.$http.post("/user/json/isBlack",{uid:this.id},{header:{"x-access-uid":_this.$store.state.user.id,"x-access-client":_this.$clientType}}).then((function(res){var res_data=eval(res.data);200==res_data.code?"1"==res_data.msg?_this.switchC=!0:_this.switchC=!1:uni.showToast({title:res_data.msg,duration:2e3})}));var darao=uni.getStorageSync(this.id+"_darao");darao&&""!=darao&&(this.switchA=darao);var zhiding=uni.getStorageSync(this.id+"_zhiding");zhiding&&""!=zhiding&&(this.switchB=zhiding)},methods:{removeFriend:function removeFriend(){var _this=this,user=uni.getStorageSync("USER");uni.showActionSheet({itemList:["删除并清除聊天记录"],success:function success(res){_this.$http.post("/user/friend/removeFriends",{uid:_this.id},{header:{"x-access-uid":_this.$store.state.user.id,"x-access-client":_this.$clientType}}).then((function(res){var res_data=eval(res.data);200==res_data.code?(uni.showToast({title:"删除成功",duration:800}),setTimeout((function(){_this.$store.state.chatMessageMap.delete(user.id+"#"+_this.id),uni.removeStorageSync(user.id+"#"+_this.id+"_CHAT_MESSAGE"),_this.$store.commit("setCur_chat_msg_list",[]),uni.removeStorageSync(user.id+"#"+_this.id+"_CHAT_MESSAGE_LASTCONTENT"),uni.removeStorageSync(user.id+"#"+_this.id+"_CHAT_MESSAGE_UNREAD");var t=_this.$store.state.ar_list.filter((function(t){return t.id!=_this.id}));_this.$store.commit("setAr_list",t);var e=_this.$store.state.friend_list;e=e.filter((function(t){var e=t.list.filter((function(t){return t.member_uuid!=_this.id}));return t.list=e,!(t.list.length<=0)})),_this.$store.commit("setFriend_list",e),uni.navigateTo({url:"/pages/index/index"})}),800)):uni.showToast({title:res_data.msg,duration:2e3})}))},fail:function(t){}})},editNote:function(){uni.navigateTo({url:"/pages/chat/user/note?fid="+this.id})},createGroup:function(){uni.navigateTo({url:"/pages/chat/group/createGroup?fid="+this.id})},goMsgRecord:function(){uni.navigateTo({url:"/pages/chat/user/message_record?id="+this.id})},clearChatMsg:function(){var t=this,e=uni.getStorageSync("USER");uni.showModal({title:"请确认",content:"是否清空聊天记录?",success:function(i){i.confirm&&(t.$store.state.chatMessageMap.delete(e.id+"#"+t.id),uni.removeStorageSync(e.id+"#"+t.id+"_CHAT_MESSAGE"),t.$store.commit("setCur_chat_msg_list",[]),uni.removeStorageSync(e.id+"#"+t.id+"_CHAT_MESSAGE_LASTCONTENT"),uni.removeStorageSync(e.id+"#"+t.id+"_CHAT_MESSAGE_UNREAD"),uni.showToast({title:"清除成功",duration:2e3}),t.$websocket.dispatch("WEBSOCKET_SEND","{body:'"+e.id+"#"+t.id+"',CMD:'CLEARCHATMSG_SINGLE_CLOUD'}"))}})},clearChatMsgBoth:function(){var t=this,e=uni.getStorageSync("USER");uni.showModal({title:"请确认",content:"是否双向清空聊天记录?",success:function(i){i.confirm&&(t.$store.state.chatMessageMap.delete(e.id+"#"+t.id),uni.removeStorageSync(e.id+"#"+t.id+"_CHAT_MESSAGE"),t.$store.commit("setCur_chat_msg_list",[]),uni.removeStorageSync(e.id+"#"+t.id+"_CHAT_MESSAGE_LASTCONTENT"),uni.removeStorageSync(e.id+"#"+t.id+"_CHAT_MESSAGE_UNREAD"),uni.showToast({title:"清除成功",duration:2e3}),t.$websocket.dispatch("WEBSOCKET_SEND","{body:'"+e.id+"#"+t.id+"',CMD:'CLEARCHATMSG'}"))}})},SwitchA:function(t){this.switchA=t.detail.value,uni.setStorageSync(this.id+"_darao",t.detail.value)},SwitchC:function SwitchC(e){var _this=this,user=uni.getStorageSync("USER");this.switchC=e.detail.value;var actionName="";actionName=this.switchC?"addBlack":"removeBlack",_this.$http.post("/user/json/"+actionName,{uid:this.id},{header:{"x-access-uid":_this.$store.state.user.id,"x-access-client":_this.$clientType}}).then((function(res){var res_data=eval(res.data);200==res_data.code||uni.showToast({title:res_data.msg,duration:2e3})}))},SwitchB:function(t){this.switchB=t.detail.value,uni.setStorageSync(this.id+"_zhiding",t.detail.value);var e=this.$store.state.ar_list,i=[],s=[];e.forEach((function(t){var e=uni.getStorageSync(t.id+"_zhiding");e?(t.top=0,s.push(t)):i.push(t)})),i.sort((function(t,e){return e.createDateTime-t.createDateTime})),s.sort((function(t,e){return e.createDateTime-t.createDateTime})),this.$store.commit("setAr_list_show",s.concat(i))}}};exports.default=_default}).call(this,__webpack_require__("5a52")["default"])},f993:function(t,e,i){"use strict";i.r(e);var s=i("8157"),a=i.n(s);for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);e["default"]=a.a}}]);